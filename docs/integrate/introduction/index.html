<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-integrate/introduction">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CPNK56S8G3"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-CPNK56S8G3",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Nervos CKB" href="/opensearch.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&display=swap">
<script src="/js/extra.js"></script><title data-rh="true">Nervos CKB Mainnet - Integration Guide | Nervos CKB</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.nervos.org/img/undraw_online.svg"><meta data-rh="true" name="twitter:image" content="https://docs.nervos.org/img/undraw_online.svg"><meta data-rh="true" property="og:url" content="https://docs.nervos.org/docs/integrate/introduction"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Nervos CKB Mainnet - Integration Guide | Nervos CKB"><meta data-rh="true" name="description" content="Connecting to the CKB network is extremely easy and only requires running one node on a machine. Once you&#x27;ve connected to the CKB network, you can use the RPC interface to interacting with the node."><meta data-rh="true" property="og:description" content="Connecting to the CKB network is extremely easy and only requires running one node on a machine. Once you&#x27;ve connected to the CKB network, you can use the RPC interface to interacting with the node."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.nervos.org/docs/integrate/introduction"><link data-rh="true" rel="alternate" href="https://docs.nervos.org/docs/integrate/introduction" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.nervos.org/docs/integrate/introduction" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://LU9B8PQ7W5-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.88793b4f.css">
<link rel="preload" href="/assets/js/runtime~main.b62abc76.js" as="script">
<link rel="preload" href="/assets/js/main.8e1dff1b.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Nervos CKB" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="Nervos CKB" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/docs/basics/introduction">Basics</a><a class="navbar__item navbar__link" href="/docs/reference/introduction">Reference</a><a class="navbar__item navbar__link" href="/docs/labs/introduction">Labs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/integrate/introduction">Integrate</a><a class="navbar__item navbar__link" href="/docs/essays/introduction">Essays</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/basics/concepts/cell-model">basics</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/essays/ckb-core-dev">essays</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/integrate/introduction">integrate</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/integrate/introduction">Nervos CKB Mainnet - Integration Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/integrate/qa">Q&amp;A | For Wallets/Exchanges/Mining Pools</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/integrate/sdk">Nervos CKB SDK</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/labs/capsule-dynamic-loading-tutorial">labs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/reference/cell">reference</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">integrate</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Nervos CKB Mainnet - Integration Guide</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Nervos CKB Mainnet - Integration Guide</h1></header><p>Connecting to the CKB network is extremely easy and only requires running one node on a machine. Once you&#x27;ve connected to the CKB network, you can use the RPC interface to interacting with the node.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="about-nervos-ckb">About Nervos CKB<a class="hash-link" href="#about-nervos-ckb" title="Direct link to heading">​</a></h2><p>CKB is the layer 1 of Nervos Network, a public/permissionless blockchain. CKB uses <a href="https://en.wikipedia.org/wiki/Proof_of_work" target="_blank" rel="noopener noreferrer">Proof of Work</a> and <a href="https://medium.com/nervosnetwork/breaking-the-throughput-limit-of-nakamoto-consensus-ccdf65fe0832" target="_blank" rel="noopener noreferrer">improved Nakamoto consensus</a> to achieve maximized performance on average hardware and internet conditions without sacrificing decentralization and security, which are the core values of blockchain.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="run-a-ckb-node">Run A CKB Node<a class="hash-link" href="#run-a-ckb-node" title="Direct link to heading">​</a></h2><p>You’ll need to deploy nodes to connect with the CKB network, read data from the blockchain, and broadcast transactions onto the CKB network. For more information, please see <a href="https://docs.nervos.org/docs/basics/guides/mainnet" target="_blank" rel="noopener noreferrer">Run CKB With The Latest Release</a> or <a href="https://github.com/nervosnetwork/ckb/blob/v0.35.0/docs/run-ckb-with-docker.md" target="_blank" rel="noopener noreferrer">Run CKB With Docker</a>. You may also need an indexer to index live cells and transactions, and then you can try <a href="https://github.com/nervosnetwork/ckb-indexer" target="_blank" rel="noopener noreferrer">CKB Indexer</a>. If you are looking for a one-stop solution that includes both node and indexer, you can try <a href="https://github.com/xxuejie/perkins-tent" target="_blank" rel="noopener noreferrer">Perkins&#x27; Tent</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="server-requirements">Server Requirements<a class="hash-link" href="#server-requirements" title="Direct link to heading">​</a></h2><ul><li>OS: Ubuntu 18.04 LTS x86_64 (recommended)</li><li>Processor:  Mainstream CPU  4c</li><li>RAM: 4G</li><li>Storage: 100G SSD</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-checklist-for-integration">A Checklist for Integration<a class="hash-link" href="#a-checklist-for-integration" title="Direct link to heading">​</a></h2><p>Before starting your integration, we recommend reading <a href="https://github.com/nervosnetwork/rfcs/blob/master/rfcs/0022-transaction-structure/0022-transaction-structure.md" target="_blank" rel="noopener noreferrer">CKB Transaction Structure</a> RFC to familiarize yourself with an essential data structure in CKB. Some common issues and corresponding example solutions (using <a href="https://github.com/nervosnetwork/ckb-sdk-java/tree/v0.35.1" target="_blank" rel="noopener noreferrer">CKB SDK Java</a>) are listed below.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="generating-and-parsing-address">Generating and Parsing Address<a class="hash-link" href="#generating-and-parsing-address" title="Direct link to heading">​</a></h3><p><a href="https://github.com/nervosnetwork/rfcs/blob/master/rfcs/0021-ckb-address-format/0021-ckb-address-format.md" target="_blank" rel="noopener noreferrer">CKB Address Format</a> is an application-level recommendation for cell lock script display. The lock script consists of three key parameters, including code_hash, hash_type, and args. CKB address packages lock script into a single line, verifiable, and human read friendly format.</p><ul><li>Generate an Address: <a href="https://github.com/nervosnetwork/ckb-sdk-java/blob/v0.35.1/ckb/src/test/java/utils/AddressGeneratorTest.java" target="_blank" rel="noopener noreferrer">JavaAddressGeneratorTest</a> or <a href="https://github.com/nervosnetwork/ckb-sdk-js/blob/v0.35.0/packages/ckb-sdk-utils/__tests__/address/index.test.js#L40" target="_blank" rel="noopener noreferrer">JsAddressGeneratorTest</a>.</li><li>Parse an Address: <a href="https://github.com/nervosnetwork/ckb-sdk-java/blob/v0.35.1/ckb/src/test/java/utils/AddressParserTest.java" target="_blank" rel="noopener noreferrer">JavaAddressParserTest</a> or <a href="https://github.com/nervosnetwork/ckb-sdk-js/blob/v0.35.0/packages/ckb-sdk-utils/__tests__/address/index.test.js#L78" target="_blank" rel="noopener noreferrer">JsAddressParserTest</a>.</li><li>Generate Private key: We won’t generate private keys for you on SDK. You need to produce it on your own, you can try <a href="https://github.com/web3j/web3j/blob/116539fff875a083c896b2d569d17416dfeb8a6f/crypto/src/main/java/org/web3j/crypto/Keys.java#L79" target="_blank" rel="noopener noreferrer">web3j</a>. CKB default lock script code using the same secp256k1 signature verification algorithm as used in bitcoin. For more information, please see <a href="https://github.com/nervosnetwork/ckb-system-scripts/blob/master/c/secp256k1_blake160_sighash_all.c" target="_blank" rel="noopener noreferrer">SECP256k1Blake160</a>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="transferring-ckb">Transferring CKB<a class="hash-link" href="#transferring-ckb" title="Direct link to heading">​</a></h3><p>The transmission of CKB between addresses is divided into three steps, constructing, signing, and submitting the transaction. You can use the following example to understand how to transfer CKB between addresses <a href="https://github.com/nervosnetwork/ckb-sdk-java/blob/v0.35.1/example/src/main/java/org/nervos/ckb/SingleSigWithCkbIndexerTxExample.java" target="_blank" rel="noopener noreferrer">SingleSigWithCkbIndexerTxExample</a> and <a href="https://github.com/nervosnetwork/ckb-sdk-java/blob/develop/example/src/main/java/org/nervos/ckb/TransferAllBalanceWithCkbIndexerExample.java" target="_blank" rel="noopener noreferrer">TransferAllBalanceWithCkbIndexerExample</a>. If you want to know the signing process, you can check <a href="https://github.com/nervosnetwork/ckb-system-scripts/wiki/How-to-sign-transaction" target="_blank" rel="noopener noreferrer">How to sign the transaction</a>. For the calculation of transaction fees, please see the <a href="https://github.com/nervosnetwork/ckb/wiki/Transaction-%C2%BB-Transaction-Fee" target="_blank" rel="noopener noreferrer">Transaction Fee</a>.</p><p>For withdrawal, need to support both transfers to <a href="https://github.com/nervosnetwork/rfcs/blob/master/rfcs/0021-ckb-address-format/0021-ckb-address-format.md#short-payload-format" target="_blank" rel="noopener noreferrer">Short Payload Format Address</a> and transfers to <a href="https://github.com/nervosnetwork/rfcs/blob/master/rfcs/0021-ckb-address-format/0021-ckb-address-format.md#full-payload-format" target="_blank" rel="noopener noreferrer">Full Payload Format</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="retrieving-data-from-node">Retrieving data from node<a class="hash-link" href="#retrieving-data-from-node" title="Direct link to heading">​</a></h3><p>You can make a JSON-RPC request to your CKB node with the SDK. There are some <a href="https://github.com/nervosnetwork/ckb-sdk-java/tree/v0.35.1" target="_blank" rel="noopener noreferrer">CKB SDK Java</a> examples: <a href="https://github.com/nervosnetwork/ckb-sdk-java/tree/v0.35.1#json-rpc" target="_blank" rel="noopener noreferrer">JSON-RPC Example</a>. Commonly used RPC interfaces are</p><ul><li><a href="https://github.com/nervosnetwork/ckb/blob/v0.35.0/rpc/README.md#get_tip_block_number" target="_blank" rel="noopener noreferrer">get_tip_block_number</a> Returns, the number/height of blocks in the longest blockchain.</li><li><a href="https://github.com/nervosnetwork/ckb/blob/v0.35.0/rpc/README.md#get_block_by_number" target="_blank" rel="noopener noreferrer">get_block_by_number</a> Get block by number/height.</li><li><a href="https://github.com/nervosnetwork/ckb/blob/v0.35.0/rpc/README.md#get_transaction" target="_blank" rel="noopener noreferrer">get_transaction</a> Returns the information about a transaction requested by transaction hash.
For more information, please see the <a href="https://github.com/nervosnetwork/ckb/blob/v0.35.0/rpc/README.md" target="_blank" rel="noopener noreferrer">CKB JSON-RPC protocols</a>. Other available SDK: <a href="https://github.com/nervosnetwork/ckb-sdk-js/tree/v0.35.0" target="_blank" rel="noopener noreferrer">CKB SDK JS</a>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-manage-cellslike-utxo-set">How to manage cells(like UTXO set)<a class="hash-link" href="#how-to-manage-cellslike-utxo-set" title="Direct link to heading">​</a></h3><p>Cell management mainly affects cell collection and address balance display. There are many ways to manage cells; here are two typical example solutions.</p><ul><li><strong>Recommended</strong>: use <a href="https://github.com/nervosnetwork/ckb-indexer" target="_blank" rel="noopener noreferrer">CKB Indexer</a> to collect cells and display balance.<ul><li><a href="https://github.com/nervosnetwork/ckb-indexer#get_cells_capacity" target="_blank" rel="noopener noreferrer">get_cells_capacity</a> Returns the live cells total capacity by the lock or type script. You can use this RPC to display address balance.</li></ul></li><li>Use your UTXO management framework to combine <a href="https://github.com/nervosnetwork/ckb/blob/v0.35.0/rpc/README.md" target="_blank" rel="noopener noreferrer">CKB JSON-RPC protocols</a> to scan the entire CKB blockchain.<ul><li>It is <strong>not recommended</strong> to use the ckb node internal <a href="https://github.com/nervosnetwork/ckb/blob/v0.35.0/rpc/README.md#indexer" target="_blank" rel="noopener noreferrer">Indexer module</a> to collect live cells, which is very slow and deprecated.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ckb-built-in-indexer">CKB built-in indexer<a class="hash-link" href="#ckb-built-in-indexer" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ckb">CKB<a class="hash-link" href="#ckb" title="Direct link to heading">​</a></h4><p>Since v0.105.0, CKB has integrated the functions in previous standalone ckb-indexers. Users of v0.105.0 nodes or above have no need to start ckb-indexer service separately. Ckb-indexer-related RPC is included in the current RPC as a module. Users don&#x27;t have to configure the indexer port separately.</p><p>There are three ways to enable CKB built-in indexer:</p><ul><li>Add the parameter <code>--indexer</code> to the command line to start CKB</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">ckb run -C &lt;path&gt; --indexer</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Add Indexer module in the RPC section of CKB config file. CKB built-in indexer will be enabled along with the node.</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[rpc]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">modules = [..., &quot;Indexer&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Add indexer_v2 section to the config file to configure the indexer. Since the indexer section was deprecated in the configuration file once before, the v2 suffix is added to avoid conflicts and to be compatible with older config files. Once the indexer section is configured, the CKB built-in indexer will be enabled along with the node.
</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[indexer_v2]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">index_tx_pool = false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>These three methods do not mutually conflict. Users can choose based on their preferences. The third method supports advanced indexer configuration. </p><p>Below listed the items to be configured: </p><table><thead><tr><th>Items</th><th>Description</th></tr></thead><tbody><tr><td>store = <code>&lt;PATH&gt;</code></td><td>Indexer db directory. Configured as data/indexer/store by default.</td></tr><tr><td>secondary_path = <code>&lt;PATH&gt;</code></td><td>Indexer directory for node data synchronization. Configured as  data/indexer/secondary_path by default.</td></tr><tr><td>poll_interval = 2</td><td>Indexer data synchronization interval. Measured in second, 2s by default. Mainly used for testing. We recommended not to modify.</td></tr><tr><td>index_tx_pool = bool</td><td>Whether to create index for the unconfirmed transactions in tx_pool.</td></tr><tr><td>db_background_jobs = 6</td><td>Number of indexer db background job. 6 by default. We recommended not to modify.</td></tr><tr><td>db_keep_log_file_num = 1</td><td>Number of indexer db debug logs. 1 by default.</td></tr></tbody></table><p>Block_filter and cell_filter bprovide options to customize index rules via a simple Rhai script.
Configured as below:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">block_filter = &quot;block.header.number.to_uint() &gt; &quot;1000000&quot;.to_uint()&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cell_filter = &#x27;let script = output.lock; script.code_hash == &quot;0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8&quot; &amp;&amp; script.hash_type == &quot;type&quot; &amp;&amp; script.args == &quot;0xa897829e60ee4e3fb0e4abe65549ec4a5ddafad7&quot;&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Also note that the difference between the RPC of CKB built-in indexer and the RPC of the previous standalone ckb-indexer:</p><ul><li>get_tip RPC in ckb-indexer is renamed to get_indexer_tip to avoid ambiguity.</li><li>get_indexer_info RPC is removed.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ckb-cli">Ckb-cli<a class="hash-link" href="#ckb-cli" title="Direct link to heading">​</a></h4><p>Ckb-cli requires v1.2.0 or higher to support CKB built-in indexer.</p><p>Specifying <a href="http://ckb-indexer-url.is" target="_blank" rel="noopener noreferrer"><code>ckb-indexer-url</code></a> is no longer necessary.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ckb-sdk">Ckb-sdk<a class="hash-link" href="#ckb-sdk" title="Direct link to heading">​</a></h4><p><strong>Go SDK</strong></p><p>Importing <a href="http://github.com/nervosnetwork/ckb-sdk-go/indexer" target="_blank" rel="noopener noreferrer">Go SDK</a> is no longer necessary.</p><p> All previous method calls are switched from <code>indexerClient</code> to CKB client as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">//import [github.com/nervosnetwork/ckb-sdk-go/indexer](http://github.com/nervosnetwork/ckb-sdk-go/indexer)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">import github.com/nervosnetwork/ckb-sdk-go/rpc</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">///BEFORE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//!!NOTE: OLD ONE, this is deprated!</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//indexerClient, err := indexer.Dial(&quot;http://127.0.0.1:8114&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//indexerClient.GetCells....</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">///AFTER</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//!!NOTE: USE THIS INSTEAD</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">var client, _ = rpc.Dial(&quot;https://testnet.ckb.dev&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//client.GetCells(...)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="lumos">Lumos<a class="hash-link" href="#lumos" title="Direct link to heading">​</a></h4><p>Lumos needs v0.19.0 to adapt to CKB build-in indexer.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">import { Indexer } from &#x27;@ckb-lumos/lumos&#x27;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// before</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// const indexer = new Indexer(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//   &quot;https://testnet.ckb.dev/indexer&quot;, </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">//   &quot;https://testnet.ckb.dev/rpc&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// );</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// after</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">const indexer = new Indexer(&quot;https://testnet.ckb.dev/rpc&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="confirmation-count-suggestion">Confirmation count suggestion<a class="hash-link" href="#confirmation-count-suggestion" title="Direct link to heading">​</a></h3><p>Since Nervos CKB network is secured by <a href="https://explorer.nervos.org/charts/hash-rate" target="_blank" rel="noopener noreferrer">ASIC PoW miners with extreme hash rate</a> now, it could achieve the same or better security threshold than Ethereum at <strong>24 block confirmations</strong>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="testing">Testing<a class="hash-link" href="#testing" title="Direct link to heading">​</a></h2><p>Once you’ve fully integrated with the CKB network, please test on the testnet and mainnet.</p><ul><li><a href="https://explorer.nervos.org/aggron/" target="_blank" rel="noopener noreferrer">Testnet Explorer</a></li><li><a href="https://explorer.nervos.org/" target="_blank" rel="noopener noreferrer">Mainnet Explorer</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="qa">Q&amp;A<a class="hash-link" href="#qa" title="Direct link to heading">​</a></h2><p>When you integrate CKB into your system, you may face some challenges. Here is a <a href="https://docs.nervos.org/docs/integrate/introduction" target="_blank" rel="noopener noreferrer">Q&amp;A</a> that may help you.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/nervosnetwork/docs-new/tree/develop/website/docs/integrate/integration-guide.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vbeJ"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/essays/workflow"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">The General Workflow for Constructing a Transaction</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/integrate/qa"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Q&amp;A | For Wallets/Exchanges/Mining Pools</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#about-nervos-ckb" class="table-of-contents__link toc-highlight">About Nervos CKB</a></li><li><a href="#run-a-ckb-node" class="table-of-contents__link toc-highlight">Run A CKB Node</a></li><li><a href="#server-requirements" class="table-of-contents__link toc-highlight">Server Requirements</a></li><li><a href="#a-checklist-for-integration" class="table-of-contents__link toc-highlight">A Checklist for Integration</a><ul><li><a href="#generating-and-parsing-address" class="table-of-contents__link toc-highlight">Generating and Parsing Address</a></li><li><a href="#transferring-ckb" class="table-of-contents__link toc-highlight">Transferring CKB</a></li><li><a href="#retrieving-data-from-node" class="table-of-contents__link toc-highlight">Retrieving data from node</a></li><li><a href="#how-to-manage-cellslike-utxo-set" class="table-of-contents__link toc-highlight">How to manage cells(like UTXO set)</a></li><li><a href="#ckb-built-in-indexer" class="table-of-contents__link toc-highlight">CKB built-in indexer</a></li><li><a href="#confirmation-count-suggestion" class="table-of-contents__link toc-highlight">Confirmation count suggestion</a></li></ul></li><li><a href="#testing" class="table-of-contents__link toc-highlight">Testing</a></li><li><a href="#qa" class="table-of-contents__link toc-highlight">Q&amp;A</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Foundation</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.nervos.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">About Us</a></li></ul></div><div class="col footer__col"><div class="footer__title">Developer</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/nervosnetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://github.com/nervosnetwork/rfcs/blob/master/rfcs/0002-ckb/0002-ckb.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">Whitepaper</a></li><li class="footer__item"><a href="https://github.com/nervosnetwork/rfcs" target="_blank" rel="noopener noreferrer" class="footer__link-item">RFCs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/AqGTUE9" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://talk.nervos.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum</a></li><li class="footer__item"><a href="https://www.reddit.com/r/NervosNetwork/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reddit</a></li><li class="footer__item"><a href="https://t.me/nervosnetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/nervosnetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://medium.com/nervosnetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item">Medium</a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCONuJGdMzUY0Y6jrPBOzH7A" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021  Nervos Foundation. All Rights Reserved.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.b62abc76.js"></script>
<script src="/assets/js/main.8e1dff1b.js"></script>
</body>
</html>